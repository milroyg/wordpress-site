!function(t){"use strict";var e={init:function(){this.adminTabs(),this.saveData(),this.installPlugin(),this.setupWizard(),this.add_tab_args(),t("#wcf-accordion").length&&t("#wcf-accordion").accordion()},adminTabs:function(e){var n=t(".wcf-admin-tab button");function o(e){var o=t(".wcf-tab-pane"),c=t(this).data("target");o.css("display","none"),n.removeClass("active"),t("#".concat(c)).css("display","block"),t(this).addClass("active")}t(n[0]).addClass("active"),n.each((function(){t(this).hasClass("active")?(t(this).click(o),t(this).trigger("click")):n.on("click",o)}))},saveData:function(){t(document).on("click",".wcf-global-switch",(function(e){var n=t(this),o=t(this).prop("checked");n.closest("form.wcf-settings").find(".wcf-settings-item:enabled").each((function(){t(this).prop("checked",o).change()}))})),t(document).on("click",".wcf-gsap-switch",(function(e){var n=t(this),o=n.prop("checked");n.closest(".settings-group").find(".wcf-settings-item:enabled").each((function(){t(this).prop("checked",o).change()}))})),t(document).on("click",".wcf-settings-item",(function(e){var n=t(this),o=n.closest(".settings-group").find(".wcf-gsap-switch");o.length&&(o.prop("checked")||n.prop("checked",!1).change())})),t(document).on("click",".smooth-settings",(function(n){var o=t(".wcf-smooth-scroller-switch").prop("checked"),c=1.35,a="";null!==WCF_ADDONS_ADMIN.smoothScroller&&(c=WCF_ADDONS_ADMIN.smoothScroller.smooth,a="on"===WCF_ADDONS_ADMIN.smoothScroller.mobile);var i;i=wp.template("wcf-settings-smooth-scroller")({smooth_value:c,on_mobile:a}),e.renderPopup(i),o&&(t('[data-checked="true"]').prop("checked",!0),e.openPopup(),t(".popup-button").on("click",(function(){var e;t.ajax({url:WCF_ADDONS_ADMIN.ajaxurl,data:{action:"save_smooth_scroller_settings",nonce:WCF_ADDONS_ADMIN.nonce,smooth:t(".input-items input[type='number']").val(),mobile:null!==(e=t(".input-items input[type='checkbox']:checked").val())&&void 0!==e?e:""},type:"POST",beforeSend:function(){},success:function(t){var e=JSON.parse(t);WCF_ADDONS_ADMIN.smoothScroller.smooth=e.smooth,WCF_ADDONS_ADMIN.smoothScroller.mobile=e.mobile},complete:function(t){},error:function(t){console.log(t)}})})))})),t(".wcf-settings-save").on("click",(function(n){var o=t(this),c=o.closest("form.wcf-settings");if(!o.closest(".wizard-content").length){var a=wp.template("wcf-settings-save"),i=null;t.ajax({url:WCF_ADDONS_ADMIN.ajaxurl,data:{action:"save_settings_with_ajax",nonce:WCF_ADDONS_ADMIN.nonce,settings:c.attr("name"),fields:c.serialize()},type:"POST",beforeSend:function(){o.html("Saving Data...")},success:function(t){i=a({title:"Good job!",text:"Settings Saved!",icon:"success"}),e.renderPopup(i),setTimeout((function(){o.html("Save Settings"),e.openPopup()}),500)},complete:function(t){setTimeout((function(){e.closePopup()}),2e3)},error:function(t){i=a({title:"Oops...",text:"Something went wrong!",icon:"error"}),e.renderPopup(i),e.openPopup(),setTimeout((function(){e.closePopup()}),2e3),console.log(t)}})}}))},installPlugin:function(){t(".wcf-plugin-installer").on("click",(function(e){e.preventDefault();var n=t(this),o=n.data("base"),c=n.data("source");if(!n.hasClass("activated"))if(n.hasClass("download"))window.open(o,"_blank");else if(n.hasClass("active")){var a=n.data("file"),i="active";t.ajax({url:WCF_ADDONS_ADMIN.ajaxurl,data:{action:"wcf_".concat(i,"_plugin"),nonce:WCF_ADDONS_ADMIN.nonce,action_base:a,plugin_source:c},type:"POST",beforeSend:function(){n.html("Activating...")},success:function(t){setTimeout((function(){n.removeClass(i),n.addClass("activated"),n.html("Activated")}),200)},complete:function(t){},error:function(t){n.html("Install"),console.log(t)}})}}))},setupWizard:function(){var e=document.querySelector("[data-wizard-bar]"),n=document.querySelector("[data-btn-previous]"),o=0;function c(e){var o=document.querySelectorAll("[data-form-tab]"),c=document.querySelectorAll("[data-wizard-item]");0!==c.length&&(o[e].classList.add("active"),c[e].classList.add("active"),c[e].classList.add("current"),o.length-1===e&&t(".wizard-buttons").hide(),n.style.display=0==e?"none":"flex")}function a(t){var e=document.querySelectorAll("[data-form-tab]"),n=document.querySelectorAll("[data-wizard-item]");e[o].classList.remove("active"),n[o].classList.remove("current"),c(o+=t)}function i(){var t=document.querySelectorAll(".wizard-item.active"),n=document.querySelectorAll("[data-wizard-item]"),o=(t.length-1)/(n.length-1)*100;e.style.setProperty("--width",o+"%")}c(o),document.querySelector("*").addEventListener("click",(function(t){t.target.dataset.btnPrevious&&(document.querySelectorAll("[data-wizard-item]")[o].classList.remove("active"),a(-1),i());t.target.dataset.btnNext&&(a(1),i())})),t(".wizard-congrats .wcf-settings-save").on("click",(function(e){var n=t(this),o=t(".wizard-content").find("form"),c={};o.each((function(){var e=t(this);c[e.attr("name")]=e.serialize()})),setTimeout((function(){t.ajax({url:WCF_ADDONS_ADMIN.ajaxurl,data:{action:"save_setup_wizard_settings",nonce:WCF_ADDONS_ADMIN.nonce,settings:c},type:"POST",beforeSend:function(){n.html("Saving Data...")},success:function(t){setTimeout((function(){n.html("Save Settings")}),500)},complete:function(t){window.location=t.responseJSON.data.redirect_url},error:function(t){console.log(t)}})}),500)}))},renderPopup:function(e){t(".wcf-addons-settings-content").html(e)},openPopup:function(){t(".wcf-addons-settings-popup").addClass("open-popup"),t(".popup-button").on("click",e.closePopup)},closePopup:function(){t(".wcf-addons-settings-popup").removeClass("open-popup")},add_tab_args:function(){t("#toplevel_page_wcf_addons_page > a").attr("href")}};e.init()}(jQuery);