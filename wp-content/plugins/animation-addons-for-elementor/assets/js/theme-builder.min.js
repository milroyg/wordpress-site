function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}!function(e){"use strict";var t={instance:[],templateId:0,init:function(){this.renderPopup(),this.reinitSelect2(),e("body.post-type-wcf-addons-template #wpcontent").on("click",".page-title-action, .row-title, .row-actions .edit > a",this.openPopup),e(document).on("click",".wcf-addons-body-overlay,.wcf-addons-template-edit-cross",this.closePopup).on("click",".wcf-addons-tmp-save",this.savePost).on("click",".wcf-addons-tmp-elementor",this.redirectEditPage).on("wcf_template_edit_popup_open",this.displayLocation).on("change","#wcf-addons-template-type, #wcf-addons-hf-display-type",this.displayLocation),e("#wcf-addons-hf-s-display-type").on("select2:select",(function(t){var a=e(this).val(),o=_toConsumableArray(new Set(a));e(this).val(o).trigger("change")}))},reinitSelect2:function(){e("#wcf-addons-hf-s-display-type").select2({ajax:{url:ajaxurl,dataType:"json",method:"post",delay:250,data:function(e){return{q:e.term,page:e.page||1,action:"wcf_get_posts_by_query",nonce:WCF_Theme_Builder.nonce}},processResults:function(e){var t=[],a=new Set;return e.forEach((function(e){a.has(e.id)||(a.add(e.id),t.push(e))})),{results:t}},cache:!0},minimumInputLength:2,placeholder:"Search and select an option",allowClear:!0})},renderPopup:function(t){var a;a=wp.template("wcf-addons-ctppopup")({templatetype:WCF_Theme_Builder.templatetype,hflocation:WCF_Theme_Builder.hflocation,archivelocation:WCF_Theme_Builder.archivelocation,singlelocation:WCF_Theme_Builder.singlelocation,editor:WCF_Theme_Builder.editor,heading:WCF_Theme_Builder.labels}),e("body").append(a)},openPopup:function(t){t.preventDefault();var a=e(this).closest("tr").attr("id"),o=null,n=null;a&&(n="post.php?post="+(o=a.replace("post-",""))+"&action=elementor"),e(".wcf-addons-tmp-save").attr("data-tmpid",o),e(".wcf-addons-tmp-elementor").attr({"data-link":n,"data-tmpid":o}),o?e.ajax({url:WCF_Theme_Builder.ajaxurl,data:{action:"wcf_get_template",nonce:WCF_Theme_Builder.nonce,tmpId:o},type:"POST",beforeSend:function(){},success:function(t){document.querySelector("#wcf-addons-template-type option[value='"+t.data.tmpType+"']").selected="true",e("#wcf-addons-template-title").attr("value",t.data.tmpTitle),e(".wcf-addons-tmp-elementor").removeClass("disabled").removeAttr("disabled","disabled")},complete:function(t){e("#wcf-addons-hf-s-display-type").val(null).trigger("change"),e(document).trigger("wcf_template_edit_popup_open"),e(".hf-location:visible select, .archive-location:visible select, .single-location:visible select").find("option[value='"+t.responseJSON.data.tmpLocation+"']")[0].selected="true",t.responseJSON.data.tmpSpLocation&&e.each(t.responseJSON.data.tmpSpLocation,(function(t,a){var o={id:t,text:a},n=new Option(o.text,o.id,!0,!0);e("#wcf-addons-hf-s-display-type").append(n).trigger("change")})),e(".wcf-addons-template-edit-popup-area").addClass("open-popup")},error:function(e){console.log(e)}}):(e(document).trigger("wcf_template_edit_popup_open"),e(".wcf-addons-tmp-elementor").addClass("button disabled").attr("disabled","disabled"),e(".wcf-addons-template-edit-popup-area").addClass("open-popup"))},closePopup:function(a){e(".wcf-addons-template-edit-popup-area").removeClass("open-popup"),e("#wcf-addons-hf-s-display-type").select2("destroy");e(".wcf-addons-template-edit-field.hf-s-location").html('<label class="wcf-addons-template-edit-label"></label>\n                                <select class="wcf-addons-template-edit-input" name="wcf-addons-hf-s-display-type[]"\n                                        id="wcf-addons-hf-s-display-type" multiple="multiple">\n                                </select>'),t.reinitSelect2()},savePost:function(t){var a,o=e(this),n=t.target.dataset.tmpid?t.target.dataset.tmpid:"",i=e("#wcf-addons-template-title").val(),l=e("#wcf-addons-template-type").val(),d=e(".hf-location:visible select, .archive-location:visible select, .single-location:visible select").val(),s=e(".hf-s-location:visible select").val();e.ajax({url:WCF_Theme_Builder.ajaxurl,data:{action:"wcf_save_template",nonce:WCF_Theme_Builder.nonce,tmpId:n,title:i,tmpType:l,tmpDisplay:d,specificsDisplay:null!==(a=JSON.stringify(s))&&void 0!==a?a:null},type:"POST",beforeSend:function(){o.text(WCF_Theme_Builder.labels.buttons.save.saving),o.addClass("updating-message")},success:function(t){if(""==n){if(t.data.id)var a="post.php?post="+t.data.id+"&action=elementor";e(".wcf-addons-tmp-save").attr("data-tmpid",t.data.id),e(".wcf-addons-tmp-elementor").attr({"data-link":a,"data-tmpid":t.data.id}),e(".wcf-addons-tmp-elementor").removeClass("disabled").removeAttr("disabled","disabled")}},complete:function(t){e("body.post-type-woolentor-template").removeClass("loading"),o.removeClass("updating-message"),o.text(WCF_Theme_Builder.labels.buttons.save.saved)},error:function(e){console.log(e)}})},redirectEditPage:function(t){t.preventDefault();var a=e(this),o=a.data("link")?a.data("link"):"";window.location.replace(WCF_Theme_Builder.adminURL+o)},displayLocation:function(t){var a=e("#wcf-addons-template-type").val();e(".hf-s-location").addClass("hidden"),"archive"===a?(e(".archive-location").removeClass("hidden"),e(".hf-location, .single-location").addClass("hidden")):"single"===a?(e(".single-location").removeClass("hidden"),e(".hf-location, .archive-location").addClass("hidden")):(e(".hf-location").removeClass("hidden"),e(".single-location, .archive-location").addClass("hidden"),setTimeout((function(){"specifics"===e("#wcf-addons-hf-display-type").val()&&e(".hf-s-location").removeClass("hidden")}),100))}};t.init()}(jQuery);