import{EacReadTheFeed}from"../modules/eac-modules.js";!function(e,i){"use strict";var t={init:function(){i.hooks.addAction("frontend/element_ready/eac-addon-pinterest-rss.default",t.widgetPinterestRss)},removeEmojis:function(e){return e?e.replace(/([#0-9]\u20E3)|[\xA9\xAE\u203C\u2047-\u2049\u2122\u2139\u3030\u303D\u3297\u3299][\uFE00-\uFEFF]?|[\u2190-\u21FF][\uFE00-\uFEFF]?|[\u2300-\u23FF][\uFE00-\uFEFF]?|[\u2460-\u24FF][\uFE00-\uFEFF]?|[\u25A0-\u25FF][\uFE00-\uFEFF]?|[\u2600-\u27BF][\uFE00-\uFEFF]?|[\u2900-\u297F][\uFE00-\uFEFF]?|[\u2B00-\u2BF0][\uFE00-\uFEFF]?|(?:\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])[\uFE00-\uFEFF]?/g,""):""},widgetPinterestRss:function(i){var a=i.find(".eac-pin-galerie"),n=i.find(".select__options-items"),r=i.find("#pin__read-button"),o=i.find(".pin-item-header"),d=i.find("#pin__loader-wheel"),s=i.find("#pin_nonce").val(),l=i.find(".pin-galerie"),u=l.data("settings")||{},p=null;0!==Object.keys(u).length&&u.data_nombre&&u.data_longueur&&(n.find("option:first").attr("selected","selected"),elementorFrontend.isEditMode()||(n.on("change",(function(i){i.preventDefault(),e(".pin-galerie__item",l).remove(),o.html("")})),r.on("click touch",(function(i){i.preventDefault(),e(".pin-galerie__item",l).remove(),o.html(""),p=new EacReadTheFeed(e(".select__options-items option:selected",a).val().replace(/\s+/g,""),s,u.data_id),d.show()}))),e(document).on("ajaxComplete",(function(i,a,n){if(null!=p&&n.ajaxOptions&&n.ajaxOptions===p.getOptions()){i.stopImmediatePropagation(),d.hide();var r=p.getItems();if(r.headError)return o.html('<span style="text-align:center; word-break:break-word;"><p>'+r.headError+"</p></span>"),!1;if(!r.rss)return o.html('<span style="text-align: center">Nothing to display</span>'),!1;var s=r.rss,c=r.profile;c.headLogo&&o.html('<img src="'+c.headLogo+'">'),o.append('<span><a href="'+c.headLink+'"><h2>'+c.headTitle+"</h2></a></span>"),o.append("<span>"+c.headDescription+"</span>"),e.each(s,(function(i,a){if(i>=u.data_nombre)return!1;var n=e("<div/>",{class:"pin-galerie__item "+u.data_style}),r=e("<div/>",{class:"pin-galerie__content"});a.title=t.removeEmojis(a.title),a.title=a.title.split(" ",12).join().replace(/,/g," ")+"...";var o='<div class="pin-galerie__item-link-post"><a href="'+a.lien+'"><h2 class="pin-galerie__item-titre">'+a.title+"</h2></a></div>";if(r.append(o),a.img&&u.data_img){var d="";d=u.data_lightbox?'<div class="pin-galerie__item-image"><a href="'+a.imgLink+'" data-elementor-open-lightbox="no" data-fancybox="pin-gallery" data-caption="'+a.title.replace(/"/g,"'")+'"><img src="'+a.img+'"></a></div>':'<div class="pin-galerie__item-image"><img src="'+a.img+'"></div>',r.append(d)}a.description=t.removeEmojis(a.description),a.description=a.description.split(" ",u.data_longueur).join().replace(/,/g," ")+"[...]";var s='<div class="pin-galerie__item-description"><p>'+a.description+"</p></div>";if(r.append(s),u.data_date){var p='<div class="pin-galerie__item-date"><i class="fas fa-calendar" aria-hidden="true"></i>'+new Date(a.update).toLocaleDateString()+"</div>",c='<div class="pin-galerie__item-auteur"><i class="fas fa-user" aria-hidden="true"></i>'+a.author+"</div>";r.append(p),a.author&&r.append(c)}n.append(r),l.append(n)})),e.fn.fancybox&&e.fancybox.close(),e('[data-fancybox="pin-gallery"]',l).fancybox({afterLoad:function(e,i){var t=window.devicePixelRatio||1;i.width=i.width*(1.5*t),i.height=i.height*(1.5*t)}}),setTimeout((function(){e(".pin-galerie__item",l).css({transition:"all 500ms linear",transform:"scale(1)"})}),200)}})))}};e(window).on("elementor/frontend/init",t.init)}(jQuery,window.elementorFrontend);