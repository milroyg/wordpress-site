class widgetClassCountDown extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{targetInstance:".eac-count-down",targetContainer:".count-down_container",targetTitle:".count-down_container-title",targetExpireMessage:".count-down_expire-message",targetExpireRedirect:".count-down_expire-redirect",targetItems:".count-down_container-items",targetItem:".count-down_container-item",digitDays:".count-down_digit-days",digitHours:".count-down_digit-hours",digitMinutes:".count-down_digit-minutes",digitSeconds:".count-down_digit-seconds"}}}getDefaultElements(){const e=this.getSettings("selectors");let t={$targetInstance:this.$element.find(e.targetInstance),$targetContainer:this.$element.find(e.targetContainer),$targetTitle:this.$element.find(e.targetTitle),$targetExpireMessage:this.$element.find(e.targetExpireMessage),$targetExpireRedirect:this.$element.find(e.targetExpireRedirect),$targetItems:this.$element.find(e.targetItems),$targetItem:this.$element.find(e.targetItem),$digitDays:this.$element.find(e.digitDays),$digitHours:this.$element.find(e.digitHours),$digitMinutes:this.$element.find(e.digitMinutes),$digitSeconds:this.$element.find(e.digitSeconds),settings:this.$element.find(e.targetContainer).data("settings")||{},timer:null,globalTime:{day:0,hour:0,minute:0,second:0},localStorageName:"eac_evgtimer-"+this.$element.data("id"),localStorageInit:"eac_evgtimer_init-"+this.$element.data("id")};return 0!==Object.keys(t.settings).length&&(t.globalTime.day=t.settings.data_days_val,t.globalTime.hour=t.settings.data_hours_val,t.globalTime.minute=t.settings.data_minutes_val,t.globalTime.second=t.settings.data_seconds_val),t}onInit(){if(super.onInit(),0!==Object.keys(this.elements.settings).length){if("due_date"===this.elements.settings.data_type)localStorage.removeItem(this.elements.localStorageName),localStorage.removeItem(this.elements.localStorageInit);else{const e=localStorage.getItem(this.elements.localStorageInit),t=this.elements.globalTime.day+":"+this.elements.globalTime.hour+":"+this.elements.globalTime.minute;e?e!==t&&(localStorage.setItem(this.elements.localStorageInit,t),localStorage.setItem(this.elements.localStorageName,t)):(localStorage.setItem(this.elements.localStorageInit,t),localStorage.setItem(this.elements.localStorageName,t)),this.applyGlobalTime()}0===parseInt(this.elements.globalTime.day)&&0===parseInt(this.elements.globalTime.hour)&&0===parseInt(this.elements.globalTime.minute)&&0===parseInt(this.elements.globalTime.second)?this.runActions():this.elements.timer=window.setInterval(this.countDownDueDate.bind(this),1e3),this.elements.$targetInstance.css("visibility","visible")}}onDestroy(){super.onDestroy(),window.clearInterval(this.elements.timer),this.elements.timer=null}countDownDueDate(){const e=this.getGlobalTime();if(this.elements.settings.data_minutes&&this.elements.$digitMinutes.hasClass("anim-digits")&&this.elements.$digitMinutes.removeClass("anim-digits"),0===e.second){if(0===e.minute){if(0===e.hour){if(0===e.day)return void this.runActions();{const t=e.day-1;this.elements.globalTime.day=t,this.elements.settings.data_days&&(this.elements.$digitDays.get(0).textContent=String(t).padStart(2,"0"))}this.elements.globalTime.hour=23,this.elements.settings.data_hours&&(this.elements.$digitHours.get(0).textContent=23)}else{const t=e.hour-1;this.elements.globalTime.hour=t,this.elements.settings.data_hours&&(this.elements.$digitHours.get(0).textContent=String(t).padStart(2,"0"))}this.elements.globalTime.minute=59,this.elements.settings.data_minutes&&(this.elements.$digitMinutes.get(0).textContent=59)}else{const t=e.minute-1;this.elements.globalTime.minute=t,this.elements.settings.data_minutes&&(this.elements.$digitMinutes.get(0).textContent=String(t).padStart(2,"0"))}this.elements.globalTime.second=59,this.elements.settings.data_seconds&&(this.elements.$digitSeconds.get(0).textContent=59)}else{const t=e.second-1;this.elements.globalTime.second=t,this.elements.settings.data_seconds&&(this.elements.$digitSeconds.get(0).textContent=String(t).padStart(2,"0"))}"evergreen"===this.elements.settings.data_type&&59===this.elements.globalTime.second&&localStorage.setItem(this.elements.localStorageName,this.elements.globalTime.day+":"+this.elements.globalTime.hour+":"+this.elements.globalTime.minute)}applyGlobalTime(){const e=localStorage.getItem(this.elements.localStorageName);e&&(this.elements.globalTime.day=parseInt(e.split(":")[0]),this.elements.globalTime.hour=parseInt(e.split(":")[1]),this.elements.globalTime.minute=parseInt(e.split(":")[2]),this.elements.globalTime.second=0,this.elements.settings.data_days&&(this.elements.$digitDays.get(0).textContent=String(this.elements.globalTime.day).padStart(2,"0")),this.elements.settings.data_hours&&(this.elements.$digitHours.get(0).textContent=String(this.elements.globalTime.hour).padStart(2,"0")),this.elements.settings.data_minutes&&(this.elements.$digitMinutes.get(0).textContent=String(this.elements.globalTime.minute).padStart(2,"0")),this.elements.settings.data_seconds&&(this.elements.$digitSeconds.get(0).textContent=String(this.elements.globalTime.second).padStart(2,"0")))}getGlobalTime(){return{day:parseInt(this.elements.globalTime.day),hour:parseInt(this.elements.globalTime.hour),minute:parseInt(this.elements.globalTime.minute),second:parseInt(this.elements.globalTime.second)}}runActions(){if(window.clearInterval(this.elements.timer),this.elements.timer=null,elementorFrontend.isEditMode()||-1===jQuery.inArray("hide",this.elements.settings.data_actions)||(1===this.elements.settings.data_actions.length?this.elements.$targetInstance.remove():(this.elements.$targetTitle.remove(),this.elements.$targetItems.remove())),-1!==jQuery.inArray("message",this.elements.settings.data_actions)&&this.elements.$targetExpireMessage.css("display","block"),-1!==jQuery.inArray("redirect",this.elements.settings.data_actions)&&this.elements.$targetExpireRedirect.length>0){const e=this.elements.$targetExpireRedirect.get(0).textContent;""!==e&&window.setTimeout((()=>{window.location.href=e}),1e3*this.elements.settings.data_tempo)}}}jQuery(window).on("elementor/frontend/init",(()=>{elementorFrontend.elementsHandler.attachHandler("eac-addon-count-down",widgetClassCountDown)}));