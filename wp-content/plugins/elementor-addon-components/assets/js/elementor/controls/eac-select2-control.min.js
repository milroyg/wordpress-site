jQuery(window).on("elementor/init",(function(){"use strict";const e=elementor.modules.controls.Select2.extend({onReady:function(){this.model_cid="elementor-control-default-"+this.model.cid,this.$control_select=this.$el.find(".eac-select2"),this.$control_wrapper=this.$el.find(".eac-select2_control-field"),this.multiple=this.model.get("multiple"),this.placeholder=this.model.get("placeholder"),this.select2Options=this.model.get("select2Options"),this.object_type=this.select2Options&&this.select2Options.object_type?this.select2Options.object_type:"",this.query_type=this.select2Options&&this.select2Options.query_type?this.select2Options.query_type:"",this.query_taxo=this.select2Options&&this.select2Options.query_taxo?this.select2Options.query_taxo:"",this.arrayOptions=this.model.get("options"),this.arrayOptions&&0!==this.arrayOptions.length?this.loadSelectOptions():this.waitForAutocomplete(),this.multiple&&(this.addbuttonPlus(),this.$control_select.on("select2:select select2:unselect",(()=>this.addbuttonPlus())))},addbuttonPlus:function(){const e=this.$control_wrapper.find(".select2-selection__rendered .select2-search.select2-search--inline");0===this.$control_wrapper.find(".select2-selection__choice select2-selection__e-plus-button").length&&setTimeout((()=>{jQuery('<li class="select2-selection__choice select2-selection__e-plus-button">+</li>').insertBefore(e)}),50)},loadSelectOptions:function(){const e=this.getControlValue();let t=[];jQuery.each(this.arrayOptions,((e,l)=>{t.push({id:e,text:l})})),this.$control_select.select2({data:t,placeholder:this.multiple?"":this.placeholder,dir:elementorCommon.config.isRTL?"rtl":"ltr",delay:500,multiple:this.multiple}),e&&this.$control_select.select2().val(e).trigger("change")},waitForAutocomplete:function(){const e=this;this.$control_select.select2({allowClear:!0,placeholder:this.multiple?"":this.placeholder,dir:elementorCommon.config.isRTL?"rtl":"ltr",delay:500,multiple:this.multiple,ajax:{type:"POST",dataType:"json",cache:!0,quietMillis:500,url:eac_autocomplete_search.ajax_url,data:t=>({search:t.term||"",object_type:e.object_type,query_type:e.query_type,query_taxo:e.query_taxo,action:eac_autocomplete_search.ajax_action,nonce:eac_autocomplete_search.ajax_nonce}),processResults:e=>({results:JSON.parse(e.data)})},initSelection:(t,l)=>{const o=e.getControlValue();l({id:"",text:""}),o&&jQuery.ajax({type:"POST",dataType:"json",cache:!0,quietMillis:500,url:eac_autocomplete_search.ajax_url,data:{search:o,object_type:e.object_type,query_type:e.query_type,query_taxo:e.query_taxo,action:eac_autocomplete_search.ajax_action_reload,nonce:eac_autocomplete_search.ajax_nonce}}).done((l=>{if(l.success){const o=JSON.parse(l.data);let s="";jQuery.each(o,((e,l)=>{l.children?jQuery.each(l.children,((e,l)=>{0===t.find("option[value='"+l.id+"']").length&&(s+='<option selected="selected" value="'+l.id+'">'+l.text+"</option>")})):0===t.find("option[value='"+l.id+"']").length&&(s+='<option selected="selected" value="'+l.id+'">'+l.text+"</option>")})),""!==s&&(t.append(s).trigger("change"),e.multiple&&e.addbuttonPlus())}}))}})},onBeforeDestroy:function(){this.$control_select.select2("destroy").off("select2:select select2:unselect")}});elementor.addControlView("eac-select2",e)}));