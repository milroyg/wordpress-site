!function($){function tmdivi_scroll_callback(tm){const timelineEntry=tm.find(".tmdivi-story"),outer_line=tm.find(".tmdivi-line"),inner_line=tm.find(".tmdivi-inner-line"),year_container=tm.find(".tmdivi-year-container");if(tm.length<1)return!1;var rootElement=document.documentElement,half_viewport=jQuery(window).height()/2,lineID=outer_line[0];if(null!=lineID){var rect=lineID.getBoundingClientRect(),timelineTop,lineInnerHeight=(timelineTop=rect.top<0?Math.abs(rect.top):-Math.abs(rect.top))+half_viewport,outer_line_height=outer_line.outerHeight(),timeline_position,timeline_top=jQuery(tm).offset().top-rootElement.scrollTop,timelineEntry_position,timelineEntry_top,year_container_pos,year_container_top;tm.addClass("tmdivi-start-out-viewport"),lineInnerHeight<=outer_line_height?(tm.addClass("tmdivi-end-out-viewport"),tm.addClass("tmdivi-start-out-viewport"),inner_line.height(lineInnerHeight),timeline_top<half_viewport&&(tm.removeClass("tmdivi-start-out-viewport"),tm.addClass("tmdivi-start-fill"))):(tm.removeClass("tmdivi-end-out-viewport"),tm.addClass("tmdivi-end-fill"),inner_line.height(outer_line_height));for(var i=0;i<timelineEntry.length;i++){const icon=jQuery(timelineEntry[i]).find(".tmdivi-icon, .tmdivi-icondot"),iconPosition=icon.length>0?icon[0].offsetTop:0;(timelineEntry_top=(timelineEntry_position=jQuery(timelineEntry[i]).offset().top+iconPosition)-rootElement.scrollTop)<half_viewport?timelineEntry[i].classList.remove("tmdivi-out-viewport"):timelineEntry[i].classList.add("tmdivi-out-viewport")}for(var i=0;i<year_container.length;i++)(year_container_top=(year_container_pos=jQuery(year_container[i]).offset().top)-rootElement.scrollTop+35)<half_viewport?year_container[i].classList.remove("tmdivi-out-viewport"):year_container[i].classList.add("tmdivi-out-viewport")}}$(document).ready((function(){$(".tmdivi-wrapper").each((function(){var timeline=$(this),lineFilling=timeline.data("line-filling");void 0!==lineFilling&&lineFilling&&(tmdivi_scroll_callback(timeline),window.addEventListener("scroll",()=>{tmdivi_scroll_callback(timeline)}))}))}))}(jQuery);